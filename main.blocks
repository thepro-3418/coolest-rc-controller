<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="xqz%-X?j3eo5%2}[uQjF">lastCmd</variable><variable id="*Hi{~?E{TC+KaZhl]Uni">ax</variable><variable id="-Z@/z/19/@W83j^kv7}g">ay</variable><variable id="7;wgPGzzl8^VWRGbS4[9">cmd</variable><variable id="C=3=I[z+F9+z(I5Zz|is">THRESH</variable><variable id="I*e,|4JVXa4tfTFo55B+">PAUSE_MS</variable></variables><block type="device_button_event" id="G1^X%ihmirWus[KzZt$`" x="1109" y="-198"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="bluetooth_uart_write" id=",ASK@${h(T8u4V}?:]%q"><value name="data"><shadow type="text" id="XKMY5~ybd+lb!2;;yqhD"><field name="TEXT">M</field></shadow></value><next><block type="device_print_message" id="7:|s(peia/tahvul0~9B"><value name="text"><shadow type="text" id="zTpWILDxIGE/fesf9tQo"><field name="TEXT">M</field></shadow></value><next><block type="variables_set" id="7pFVz9(.u~[@Z=0^RwnG"><field name="VAR" id="xqz%-X?j3eo5%2}[uQjF">lastCmd</field><comment pinned="false" h="80" w="160">treat as last so we don't immediately resend another cmd</comment><value name="VALUE"><shadow type="math_number" id="%-R$Y3m)+~!us*;Vb=/z"><field name="NUM">0</field></shadow><block type="text" id="u!_?[{9);n$imDs2Zwjs"><field name="TEXT">M</field></block></value><next><block type="device_pause" id="nFI)sTvARv:}ln:~72G)"><data>{"commentRefs":[],"fieldData":{}}</data><value name="pause"><shadow type="timePicker" id="=bD(v~n[%V}-mN@4|TLY"><field name="ms">400</field></shadow></value><next><block type="device_clear_display" id="QtA8c^^T1fH)^$UyvV?t"></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id=",mzF.xCy-VsW91FOGCXT" x="177" y="-81"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">Button A: emergency stop -&gt; send "S"</comment><statement name="HANDLER"><block type="bluetooth_uart_write" id="J@YNQXw)z1QR!v,Gr#;w"><value name="data"><shadow type="text" id="kpu:jTTgPY`AV=G:!02_"><field name="TEXT">S</field></shadow></value><next><block type="basic_show_icon" id="26@!0Og-c8cr)8j2oyBt"><field name="i">IconNames.No</field><next><block type="variables_set" id="0$a6/x:.-DRSWhv0`wyM"><field name="VAR" id="xqz%-X?j3eo5%2}[uQjF">lastCmd</field><value name="VALUE"><shadow type="math_number" id="d:Lrh}-fkP4E$E/67$xE"><field name="NUM">0</field></shadow><block type="text" id="bn}C?4nQtz;MQ(]|~bQ6"><field name="TEXT">S</field></block></value><next><block type="device_pause" id="kDc_)vOwh7kx;0=B%#Kr"><value name="pause"><shadow type="timePicker" id="3t{N;p:H%E#5H!bSWG,y"><field name="ms">300</field></shadow></value><next><block type="device_clear_display" id="6=70uZdf0W!SFXhj8uNe"></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="#9bZVA}/Pdl;q^?zhtEG" x="550" y="-81"><statement name="HANDLER"><block type="variables_set" id="OJ{KmUdC^NmE?R9sZi1h"><field name="VAR" id="*Hi{~?E{TC+KaZhl]Uni">ax</field><comment pinned="false" h="80" w="160">Read accelerometer</comment><value name="VALUE"><shadow type="math_number" id="vY?4UMmMIq8}naG5}OLk"><field name="NUM">0</field></shadow><block type="device_acceleration" id="zeH(B)E|osPM$-:Lga05"><field name="NAME">Dimension.X</field></block></value><next><block type="variables_set" id="hF0GEmpwCW0/(p}wzdSd"><field name="VAR" id="-Z@/z/19/@W83j^kv7}g">ay</field><value name="VALUE"><shadow type="math_number" id="8=4*lZ-1n`Qlc_me!2*Z"><field name="NUM">0</field></shadow><block type="device_acceleration" id="DW6Je[EH)LIZ(h`SpVi*"><field name="NAME">Dimension.Y</field></block></value><next><block type="variables_set" id="ZUM:Nb+iF(K08@@9MwdY"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field><comment pinned="false" h="80" w="160">Determine command based on tilt
default stop</comment><value name="VALUE"><shadow type="math_number" id="5N+Z(*WhJM/F{-n9e72t"><field name="NUM">0</field></shadow><block type="text" id="vYIfN:I+gykI}[-=.~YS"><field name="TEXT">S</field></block></value><next><block type="controls_if" id="i6eGOU8~e/1rS9s3VlD9"><mutation elseif="3" else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="hVr,/}T{97DG6xHB[fAf"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="tmdK:HxS2|-s}JpR~^{2"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="K4Y,Ce51cSX3W%m*/,Kv"><field name="NUM">0</field></shadow><block type="variables_get" id="o;|psy?e*~)V$FEYj{l["><field name="VAR" id="-Z@/z/19/@W83j^kv7}g">ay</field></block></value><value name="B"><shadow type="math_number" id="zb6-bUbjh,@4tToA(M.["><field name="NUM">0</field></shadow><block type="math_arithmetic" id="|jabcL5t6?!}.~3g.`g+"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="5}XjyK7,+.c=0j}Cjdl/"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="PnPlx;8GQVP|0=t=xnx;"><field name="NUM">0</field></shadow><block type="variables_get" id="?o+$8ZP%|~F=F1[T0ImF"><field name="VAR" id="C=3=I[z+F9+z(I5Zz|is">THRESH</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="BL!iP]u3?8qi!}NVEz^J"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field><comment pinned="false" h="80" w="160">forward (tilt front)</comment><value name="VALUE"><shadow type="math_number" id="-Z3P|QcU6$N{!+l]rHwb"><field name="NUM">0</field></shadow><block type="text" id="t6Dl8]sSGOR;bo_i,J!X"><field name="TEXT">F</field></block></value><next><block type="basic_show_arrow" id=":GO~iWSXbp[)`Nf4g.#)"><data>{"commentRefs":[],"fieldData":{}}</data><value name="i"><shadow type="device_arrow" id="|jS*ux$8ka)~yMZx#V+^"><field name="arrow">ArrowNames.North</field></shadow></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="ZkBwN!FQ@]cD8egI@sp["><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="HU!;W6?PQq6`P/:OnqHk"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="Ik}iCmX(j}TX/Oby,R=("><field name="NUM">0</field></shadow><block type="variables_get" id="iZY_3TG,t[hw^yzOx@7M"><field name="VAR" id="-Z@/z/19/@W83j^kv7}g">ay</field></block></value><value name="B"><shadow type="math_number" id="PSjPd*3osr#DMJHW*9FK"><field name="NUM">0</field></shadow><block type="variables_get" id=",FAbEX-D}dbA0AYmvCG}"><field name="VAR" id="C=3=I[z+F9+z(I5Zz|is">THRESH</field></block></value></block></value><statement name="DO1"><block type="variables_set" id="H(B8~?9vFk0$]E~i?/^0"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field><comment pinned="false" h="80" w="160">backward (tilt back)</comment><value name="VALUE"><shadow type="math_number" id="miVg!$D=;Moh7~K,CKWd"><field name="NUM">0</field></shadow><block type="text" id="ro,L:mS=ej3L+jP$7feF"><field name="TEXT">B</field></block></value><next><block type="basic_show_arrow" id="pyYXG7KoEYpk%)Oznn.s"><data>{"commentRefs":[],"fieldData":{}}</data><value name="i"><shadow type="device_arrow" id="=RDNbahjnBI`#~3J)`X%"><field name="arrow">ArrowNames.South</field></shadow></value></block></next></block></statement><value name="IF2"><shadow type="logic_boolean" id="8`$Eqmp_AwS?i6}46}:o"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="k^Pv~)lBdcR)(~:WTQ0]"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="oArhaxe;P`I3H8Y}cfql"><field name="NUM">0</field></shadow><block type="variables_get" id="f$(53hm,n7xx^BIp%RYm"><field name="VAR" id="*Hi{~?E{TC+KaZhl]Uni">ax</field></block></value><value name="B"><shadow type="math_number" id="Bi@hBonwD]VPupKp4b!G"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="`DHi](4LiL.YFcWOvrmP"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="*Xc=dS)j#!kd3WQkeRPf"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="sTBaaP2iJ)%lD0o@3n/O"><field name="NUM">0</field></shadow><block type="variables_get" id="(h4dqu[n)#zdb~QBlc^F"><field name="VAR" id="C=3=I[z+F9+z(I5Zz|is">THRESH</field></block></value></block></value></block></value><statement name="DO2"><block type="variables_set" id="+4*/eb):*WH~7+M9y1Xg"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field><comment pinned="false" h="80" w="160">left (tilt left)</comment><value name="VALUE"><shadow type="math_number" id="!f`X|D0oUE_PdGDs$#sA"><field name="NUM">0</field></shadow><block type="text" id="PpuUfsB3J}gL2H,!-!:!"><field name="TEXT">L</field></block></value><next><block type="basic_show_arrow" id="{!oCB_mMWVrc`?Zat7/9"><data>{"commentRefs":[],"fieldData":{}}</data><value name="i"><shadow type="device_arrow" id="vm1j{ckSEolu.*([oPQ%"><field name="arrow">ArrowNames.West</field></shadow></value></block></next></block></statement><value name="IF3"><shadow type="logic_boolean" id="6tu|_Zv=6BQ51]O.}:+P"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="SXMV1RTuPVL83cxxw^i,"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="9;Y=}Uh3_Pn|BfoT=jrh"><field name="NUM">0</field></shadow><block type="variables_get" id="k,)ia3y`Q.@kpq:7C1jL"><field name="VAR" id="*Hi{~?E{TC+KaZhl]Uni">ax</field></block></value><value name="B"><shadow type="math_number" id="x-W?lo3wH#W7{?L07sMp"><field name="NUM">0</field></shadow><block type="variables_get" id="PsId`b:t}C6vXUck/M^d"><field name="VAR" id="C=3=I[z+F9+z(I5Zz|is">THRESH</field></block></value></block></value><statement name="DO3"><block type="variables_set" id="1],Z|ZQ2bl-!hy_|$]*D"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field><comment pinned="false" h="80" w="160">right (tilt right)</comment><value name="VALUE"><shadow type="math_number" id="HG;ua`?eAQe=%3U$SH%*"><field name="NUM">0</field></shadow><block type="text" id="^U5cw}*oa~|n!{5_T8Z0"><field name="TEXT">R</field></block></value><next><block type="basic_show_arrow" id="hJ-EC16jrvKEQY-+Hc7D"><data>{"commentRefs":[],"fieldData":{}}</data><value name="i"><shadow type="device_arrow" id="wzdY7nr79KM0d]X`wV7}"><field name="arrow">ArrowNames.East</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="device_show_leds" id="R4p-oGaY0m7PuE%@qm9D"><field name="LEDS">`
        . . . . . 
        . . . . . 
        . . # . . 
        . . . . . 
        . . . . .
        `</field><comment pinned="false" h="80" w="160">neutral position</comment></block></statement><next><block type="controls_if" id="=Rkqw]Cav!gu-zdvVpuK"><comment pinned="false" h="80" w="160">Send only if changed (reduces spam)</comment><value name="IF0"><shadow type="logic_boolean" id="SgAA~j/)8q`aqVV[H!73"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="nxM*+++I_Tjg}$cvz}48"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="Tw:3y01GeME,`=-[?;{H"><field name="NUM">0</field></shadow><block type="variables_get" id="v!/USxYv,VS*_!x/WVCb"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field></block></value><value name="B"><shadow type="math_number" id="DU#5Yw$YXP?Cl8l/uuh{"><field name="NUM">0</field></shadow><block type="variables_get" id="WO)3c}c;{UZZ$is+c}A/"><field name="VAR" id="xqz%-X?j3eo5%2}[uQjF">lastCmd</field></block></value></block></value><statement name="DO0"><block type="bluetooth_uart_write" id="lU@083oD(96KF25)g.Pu"><value name="data"><block type="variables_get" id="V%`}/4W^{:b?0{6aDhR4"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field></block></value><next><block type="variables_set" id="EDSn~mPwkX-1@z7DE:.#"><field name="VAR" id="xqz%-X?j3eo5%2}[uQjF">lastCmd</field><value name="VALUE"><shadow type="math_number" id="BCSV%x.DaMVLf%,nwqnR"><field name="NUM">0</field></shadow><block type="variables_get" id="{^GsTi;3Gp)|w=5fWMWy"><field name="VAR" id="7;wgPGzzl8^VWRGbS4[9">cmd</field></block></value></block></next></block></statement><next><block type="device_pause" id="F5!zteKFom{(TKrfFWAG"><value name="pause"><shadow type="timePicker" id=".D:GNb[B|0w(}r|ok;T)"><field name="ms">500</field></shadow><block type="variables_get" id="pMQA!uA%5.+5?_-31=E:"><field name="VAR" id="I*e,|4JVXa4tfTFo55B+">PAUSE_MS</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="pxt-on-start" id="4vY%!nGcY+._q,Ka2VQl" x="0" y="0"><statement name="HANDLER"><block type="bluetooth_start_uart_service" id=".oR`;xa!h3qtxHFZs_b;"><next><block type="device_print_message" id=".|#s:VP=E7O7%iZ8bx/1"><value name="text"><shadow type="text" id="_GhR_Q301s9UI#Xeg8sO"><field name="TEXT">BT</field></shadow></value><next><block type="variables_set" id="r]MAf`)sI%g,b|$Y(P!r"><field name="VAR" id="C=3=I[z+F9+z(I5Zz|is">THRESH</field><comment pinned="false" h="80" w="160">Constants for tilt thresholds (adjust if needed)
larger = less sensitive</comment><value name="VALUE"><shadow type="math_number" id="Iv0O!`i!dVA=}hG?|pq("><field name="NUM">300</field></shadow></value><next><block type="variables_set" id="!J6fPoYgQ:[$MEmxU/n2"><field name="VAR" id="I*e,|4JVXa4tfTFo55B+">PAUSE_MS</field><comment pinned="false" h="80" w="160">how often we check/send</comment><value name="VALUE"><shadow type="math_number" id="JEf3ZPb.X7wA]FbRpkMH"><field name="NUM">150</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="bluetooth_on_connected" id="MO~#ogbujpa5cvS@5n81" x="-23" y="220"><statement name="HANDLER"><block type="basic_show_icon" id="hBa99))DMV|[=J}5:kde"><field name="i">IconNames.Heart</field></block></statement></block></xml>